<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Phone Tracker</title>
  <style>
    body { font-family: Arial; text-align: center; }
    #map { height: 400px; width: 100%; }
  </style>
</head>
<body>
  <h1>Track My Phone</h1>
  <button onclick="sendLocation()">Send My Location</button>
  <button onclick="getLocation()">View Location</button>
  <div id="map"></div>
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY"></script>
  <script>
    const deviceId = 'my-phone'; // Unique ID for your device
    let map, marker;

    function initMap(lat, lng) {
      map = new google.maps.Map(document.getElementById('map'), { center: {lat, lng}, zoom: 15 });
      marker = new google.maps.Marker({ position: {lat, lng}, map });
    }

    function sendLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(pos => {
          const { latitude, longitude } = pos.coords;
          fetch('http://localhost:3000/update-location', { // Change to deployed URL
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ id: deviceId, lat: latitude, lng: longitude })
          }).then(() => alert('Location sent!'));
        });
      } else {
        alert('Geolocation not supported');
      }
    }

    function getLocation() {
      fetch(`http://localhost:3000/get-location/${deviceId}`)
        .then(res => res.json())
        .then(data => {
          if (data.error) alert(data.error);
          else initMap(data.lat, data.lng);
        });
    }
  </script>
</body>
</html>